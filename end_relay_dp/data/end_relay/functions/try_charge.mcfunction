execute if entity @s[nbt={data:{charged:0b}}] positioned ~01 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=west]{Items:[{Slot:0b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:0}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~01 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=west]{Items:[{Slot:1b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:1}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~01 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=west]{Items:[{Slot:2b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:2}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~01 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=west]{Items:[{Slot:3b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:3}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~01 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=west]{Items:[{Slot:4b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:4}

execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~01 if block ~ ~ ~ minecraft:hopper[facing=north]{Items:[{Slot:0b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:0}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~01 if block ~ ~ ~ minecraft:hopper[facing=north]{Items:[{Slot:1b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:1}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~01 if block ~ ~ ~ minecraft:hopper[facing=north]{Items:[{Slot:2b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:2}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~01 if block ~ ~ ~ minecraft:hopper[facing=north]{Items:[{Slot:3b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:3}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~01 if block ~ ~ ~ minecraft:hopper[facing=north]{Items:[{Slot:4b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:4}

execute if entity @s[nbt={data:{charged:0b}}] positioned ~-1 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=east]{Items:[{Slot:0b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:0}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~-1 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=east]{Items:[{Slot:1b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:1}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~-1 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=east]{Items:[{Slot:2b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:2}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~-1 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=east]{Items:[{Slot:3b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:3}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~-1 ~0 ~00 if block ~ ~ ~ minecraft:hopper[facing=east]{Items:[{Slot:4b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:4}

execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~-1 if block ~ ~ ~ minecraft:hopper[facing=south]{Items:[{Slot:0b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:0}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~-1 if block ~ ~ ~ minecraft:hopper[facing=south]{Items:[{Slot:1b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:1}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~-1 if block ~ ~ ~ minecraft:hopper[facing=south]{Items:[{Slot:2b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:2}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~-1 if block ~ ~ ~ minecraft:hopper[facing=south]{Items:[{Slot:3b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:3}
execute if entity @s[nbt={data:{charged:0b}}] positioned ~00 ~0 ~-1 if block ~ ~ ~ minecraft:hopper[facing=south]{Items:[{Slot:4b,id:"minecraft:end_crystal"}]} run function end_relay:macro/charge {slot:4}